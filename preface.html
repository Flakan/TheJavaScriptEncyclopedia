<html>
<head>
<title>The JavaScript Encyclopedia: Preface</title>
<link rel="stylesheet" href="encyclopedia.css" type="text/css">
</head>

<body>
<h1>Preface</h1>
<p>
In 2009, as we were wrapping up ES5, I was thinking about how to organize the
material. I designed a hypertext encyclopedia format  specifically for
programming languages. I think the format would have  worked well, but I never
finished the project.
</p><p>
It is easy to  forget that the web was originally intended to be a hypertext
system.  <i><a href="index.html">The JavaScript Encyclopedia</a></i> would have used hypertext very
effectively. Many of the  articles would contain code that demonstrated or
implemented the  concept.
</p>
<p>
I intended that <i><a href="index.html">The JavaScript Encyclopedia</a></i> be finished when ES5 was
released. Not only did I miss that deadline, but since then ES6 has been
published, which was itself four years late. So it is starting to become clear that
I am not going to get this done on my own. I need  help.
</p>
<p>
The prototype material can be seen at
<a href="http://www.crockford.com/javascript/encyclopedia">http://www.crockford.com/javascript/encyclopedia</a>.
</p>
<h2>Cyc</h2>
<p>The most important thing I learned in doing the prototype was that HTML is a horrible language for writing hypertext. It is clumsy, fussy, ugly, and error-prone. So I designed Cyc, a simple language with only one reserved character. By writing in Cyc, we can use Cyc processors that can produce </p>
<ul>
    <li>a single HTML file</li>
    <li> an HTML file for each chapter</li>
    <li> an HTML file for each specimen</li>
    <li>an HTML file for each article</li>
    <li>a TEX manuscript</li>
    <li>a PostScript manuscript</li>
    <li>or anything else</li>
</ul>
<p>A source is a set of enviroments that can contain other environments and content. The environments are</p>
<ul>
<li><code>@book</code></li>
<li><code>@chapter</code></li>
<li><code>@appendix</code></li>
<li><code>@specimen</code></li>
<li><code>@article</code></li>
<li><code>@section</code></li>
<li><code>@program</code></li>
<li><code>@es5</code></li>
<li><code>@table</code></li>
<li><code>@list</code></li>
<li><code>@link</code></li>
<li><code>@url</code></li>
<li><code>@b</code></li>
<li><code>@i</code></li>
<li><code>@t</code></li>
<li><code>@reserved@</code></li>
<li><code>@aka</code></li>
</ul>
<p>A book many contain one or more chapters. A chapter contains one or more specimens, which is can be a reserved word, name, concept, or special character. A specimen may contain one or more articles. An article may contain sections.</p>
<p>Paragraphs are indicated with a blank line.</p>
<p>A program is a JavaScript program that is illustrating or implementing a concept.</p>
<p class=es5>Some paragraphs will be marked with an ES5 flag, indicating a new feature that is not availible with, or somehow incompatible with language processors that implement ECMAScript, Sixth Edition. With each new edition, we should remove all of the old flags, and then add new flags to highlight the latest incompatibilities.</p>
<p>A table is a two dimensional grid structure. <code>@|</code> and <code>@_</code> are used to separate the cells and rows. <code>@!</code> is used inside of a cell to indicate a header cell.</p>
<p>A list gives each paragraph a bullet.</p>
<p>A link refers to another feature of the hypertext. A url identifies a feature outside of the hypertext.</p>
<p>Text can be marked as bold or italics or typewriter-like. Programmers like their programs to look like they were written with typewriters because they love antiques and steam.</p>
<p>The special mark <strong>RESERVED WORD</strong> shows specimens that are reserved words. Descriptive marks can be placed after special characters and operators to give them names.</p>
<p>There are 6 sets of bracketing characters. They are all available all of the time.
It is likely that there is at least one pair that will not conflict with the content being bracketed.</p>
<ul>
<li><code>&quot; &quot;</code></li>
<li><code>' '</code></li>
<li><code>( )</code></li>
<li><code>[ ]</code></li>
<li><code>{ }</code></li>
<li><code>&lt; &gt;</code></li>
</ul>
<p>Example:</p>
<pre>This sentence contains @b(bold), @i "italics", and @t 'typewriter' stuff.</pre>
<p>In addition, <code>@begin</code> and <code>@end</code> provide an alternate way of handling environments that can be easier for larger structures.</p>
<pre>@begin[program]
function foo() {
    return '[';
}
@end[program]</pre>
<p>This is  Cyc encoding of <a href="U.html">Chapter U</a>:</p>
<pre>@chapter "U"

@specimen "u"
See @link &lt;Unicode escape sequence&gt;.

@specimen "undefined"
Blah.

@article &lt;@t(undefined) @link 'literal'&gt;
Blah.

@specimen "Unicode"
Blah.

@article "Unicode escape sequence"
Blah.

@specimen "unshift"
@article "@t(unshift) @link [Array prototype function]"
Blah.

@specimen "upper case"
See @link &quot;case&quot;.

@specimen "URIError"
@article "@t(URIError) @link [global function]"
Blah.

@specimen "use"
See @link{strict}.</pre>
<p>This is Cyc encoding for the first part of the <a href="special.html">Chapter of Special Characters</a>:</p>
<pre>@chapter "special"

@specimen (! @aka "exclamation point")

@article (@t '!' @link &lt;prefix operator&gt; @aka(not))

The @t(!) @link &lt;prefix operator&gt; produces @link &lt;false&gt; if its @link&lt;operand&gt; is
@link &lt;truthy&gt;, and @link &lt;true&gt; if its @link &lt;operand&gt; is @link &lt;falsy&gt;.

@program {
! true        // false
! false       // true
! 'false'     // false
! 0           // true
! 42          // false
!! 42         // true
}

@article (@t '!=' @link &lt;infix operator&gt; @aka (coercing not equal))

The @t(!=) @link &lt;infix operator&gt; determines if two
@link &lt;operand&gt;s are not equal. If the @link &lt;operand&gt;s have different types it may
attempt to coerce the types of the @link &lt;operand&gt;s before comparing them. It
produces the opposite of the @link &lt;== infix operator&gt;.

The @t(!=) @link &lt;infix operator&gt; produces the same result as this function:

@program [
function coercing_not_equal(left, right) {
    return !(left @link&lt;== infix operator&gt; right);
}
]

Avoid this operator. Always use the @link &lt;!== infix operator&gt; instead.

@article (@t '!==' @link &lt;infix operator&gt; @aka "not equal")

The @t '!==' @link &lt;infix operator&gt; determines if two
@link&lt;operand&gt;s are not equal. It produces the opposite of the
@link&lt;=== infix operator"&gt;. The result can only @link &lt;true&gt; if the types of
the two @link&lt;operand&gt;s are the same.

If the @link&lt;operand&gt;s are objects, the result is @link &lt;true&gt; only if the
@link&lt;operand&gt;s are the same object. If the @link&lt;operand&gt;s are similar
objects, the result is @link &lt;false&gt;.

The @t(!==) @link &lt;infix operator&gt; produces the same result as this function:

@program [
function not_equal(left, right) {
    return !(left @link &lt;=== infix operator&gt; right);
}
]

The expression @t(x !== x) will always result in @link &lt;false&gt; except when the
value of @t(x)is @link &lt;NaN&gt;. This bizarre behavior is intentional.

@begin(program)
false != 'false'             // true
1 !== '1'                    // true
null !== undefined           // true
{} !== {}                    // true
1 !== 1.0                    // false
'cat' !== 'c' + 'a' + 't'    // false
NaN !== NaN                  // true
@end(program)

@specimen {" @aka (double quotation mark)}

See @link &lt;string literal&gt;.

@specimen "$ @aka (dollar sign)"

@article "@t($) @link &lt;identifier character&gt;"

The @t($) character is treated as a letter in an @link &lt;identifier&gt;.
It was added to the language specifically for the use of code generators
and macro processors so that they could generate identifiers with confidence
that they would not collide with  programs produced by humans. Unfortunately,
the web developer community ignored the intention of @t($) and used it to create
ugly, cryptic identifiers that collide with each other.

@es5 {@link &lt;ES5&gt; does not attempt to discourage the use of @t($).}

@specimen "% @aka (percent sign)"

@article "@t(%) @link &lt;infix operator&gt; @aka (remainder)"

The @t(%) @link &lt;infix operator&gt; computes the @link &lt;remainder&gt; produced by
the @link &lt;division&gt; of two @link&lt;operand&gt;s: a @link &lt;dividend&gt; and a
@link &lt;divisor&gt;. If the @link&lt;operand&gt;s are not numbers, it attempts
to coerce them to numbers. If either @link &lt;operand&gt; cannot be coerced to a
number or is @link &lt;NaN&gt;, or if the @link &lt;dividend&gt; is an
@link &lt;Infinity&gt;, or if the @link &lt;divisor&gt; is a @link &lt;zero&gt;,
then the result is @link &lt;NaN&gt;. Otherwise, if
the @link &lt;divisor&gt; is an @link &lt;Infinity&gt;,
the result is the @link &lt;dividend&gt;.

The @t(%) @link &lt;operator produces&gt; the same result as this function:

@begin(program)
function remainder(left, right) {
    var dividend = left,
        divisor = right,
        quotient = dividend / divisor;
    if (divisor === Infinity || divisor === -Infinity) {
        return isFinite(dividend) ? dividend : NaN;
    } else {
        return dividend - (divisor * Math[quotient &gt;= 0
            ? 'floor'
            : 'ceil](quotient));
    }
}
@end(program)

The sign of the result will be the sign of the dividend, not
the divisor. This differs from the modulo operator found in some other
languages, where the result has the sign of the divisor. The modulo function
can be computed with the following function, which adds the
divisor to the remainder if the remainder has the wrong sign:

@begin(program)
function modulo(left, right) {
    var dividend = +left,
        divisor =  +right,
        mod = dividend % divisor;
    if (mod && (divisor &gt; 0) === (mod &lt; 0)) {
        mod += divisor;
    }
    return mod;
}
@end(program)

Examples:

@program {
 15 %  4            //  3
-15 %  4            // -3
-15 % -4            // -3
 15 % -4            //  3
 15 %  0            // NaN
 15 % -Infinity     // 15
  0 %  Infinity     //  0
  0 %  0            // NaN
Infinity % 4        // NaN
Infinity % Infinity // NaN
}

@article "@t(%=) @link &lt;assignment infix operator&gt; @aka (remainder)"

The @t(%=) operator replaces the left value with the remainder
of the left value divided by the right value. So

@program {left %= divisor;}

 is a streamlined equivalent of

@program {left = left % divisor;}

@specimen "& @aka (ampersand)"

@article "@t(&) @link &lt;infix operator&gt; @aka (bitwise and)"

The @t(&) infix operator performs the bitwise @link(and) operation.
The @link(and) operation uses 32 bits from each @link&lt;operand&gt;.
If two corresponding bits are 1, then the corresponding result bit is 1.
Otherwise, the corresponding result bit is 0. The @link&lt;operand&gt;s are
converted from a number (64 bit floating point) to a 32-bit @integer&lt;integer&gt;.
It produces the same result as this function:

@program "
function bitwise_and(left, right) {
    var result = 0, bit, i, left_int, right_int,
        two_32 = 4294967296,    // Math.pow(2, 32)
        two_31 = 2147483648;    // Math.pow(2, 31)

// Make 32-bit unsigned integers from the @link&lt;operand&gt;s. The % is a remainder
// operator, not a modulo operator, so some sign correction may be necessary.

    left_int = Math[left &gt;= 0 ? 'floor' : 'ceil'](left) % two_32;
    if (left_int &lt; 0) {
        left_int += two_32;
    }
    right_int = Math[right &gt;= 0 ? 'floor' : 'ceil'](right) % two_32;
    if (right_int &lt; 0) {
        right_int += two_32;
    }

// For each of the 32 bits,
//      Double the current result
//      Set the new bit to 1
//      If the most significant bits are set, then subtract them out
//      Otherwise clear the new bit
//      Add the new bit to the result
//      Double the ints, rotating the next most significant bit into position

    for (i = 0; i &lt; 32; i += 1) {
        result += result;
        bit = 1;
        if (left_int &gt;= two_31) {
            left_int -= two_31;
        } else {
            bit = 0;
        }
        if (right_int &gt;= two_31) {
            right_int -= two_31;
        } else {
            bit = 0;
        }
        result += bit;
        left_int += left_int;
        right_int += right_int;
    }

// If the most significant bit of the result is set, then produce a negative.

    if (result &gt;= two_31) {
        result -= two_32;
    }
    return result;
}"

@article "@t(&&) @link &lt;infix operator&gt; @aka (and)"

Blah.

@article "@t(&=) @link &lt;assignment infix operator&gt; @aka (bitwise and)"

Blah.

@specimen "' @aka (single quotation mark)"

@article "@t(') @aka (string delimiter)"

See @link &lt;string literal&gt;.

@specimen "( @aka (left parenthesis)"

Parentheses have many uses. In @link&lt;operand&gt; position, they provide
grouping for overriding @link&lt;operator precedence&gt; or to make the meaning
of complicated expressions clearer. In suffix position, they cause the invocation of
functions. In function definitions and @link&lt;catch&gt; blocks they define parameters
and exception variables. In statement position they can disambiguate
@link&lt;function literal&gt; from @link&lt;function statement&gt;.
In a @link&lt;statement&gt; they denote a conditional expression or a special variable.

@article "@t'()' grouping"

In expressions, parentheses can be used to override the precedence
of operators, or to break up complicated expressions to make them easier
to understand.

@program {
3 + 4 * 5      // 23
3 + (4 * 5)    // 23
(3 + 4) * 5    // 35
}

Parentheses can also be used to improve the readability of the invocation of an
@link&lt;immediate function&gt;.

@article "@t '()' parameter list"

See @link&lt;function&gt;.

@article "@t '()' statement punctuator"

Parentheses are used in statements. See

@list {
  @link "do statement"
  @link "if statement"
  @link "for in statement"
  @link "for statement"
  @link "function statement"
  @link "switch statement"
  @link "try statement"
  @link "while statement"
  @link "with statement"
}

@article "@t '()' @link &lt;suffix operator&gt; @aka (invoke)"

Blah.

@specimen "@t ')' @aka (right parenthesis)"

See @link &lt;@t'(' @aka (left parenthesis)&gt;.
</pre>
<p>Contributions may be submitted at <a href="https://github.com/douglascrockford/TheJavaScriptEncyclopedia">https://github.com/douglascrockford/TheJavaScriptEncyclopedia</a>. </p>
</body>
</html>
